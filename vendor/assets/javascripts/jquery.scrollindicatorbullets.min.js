(function(){"use strict";!function(t){return"function"==typeof define&&define.amd?define(["jquery","waypoints/lib/noframework.waypoints.js"],t):"object"==typeof exports&&"function"==typeof require?t(require("jquery"),require("waypoints/lib/noframework.waypoints.js")):t(jQuery)}(function(t){return t.fn.scrollIndicatorBullets=function(e){var n,i,r,o,a,l,u,c,s,d,f,p,w,h,m;if(a={titleSelector:null,scrollDuration:400,touchTitleDelay:500,scrollOffset:50,waypointOffsetDown:window.innerHeight/3,waypointOffsetUp:50,pgKeysEnabled:!0},m=t.extend({},a,e),i=this.filter(function(){return t(this).height()>10}),r=i.filter("[id]"),n=t([]),r.length)return p=function(e){return n=e,null!=history.replaceState&&history.replaceState({},"",window.location.pathname+"#"+e.attr("id")),t("body,html").animate({scrollTop:e.offset().top-m.scrollOffset},m.scrollDuration,function(){return o(e)})},l=function(){return""!==t.trim(t(this).text())},d=function(e){var n;return n=null,e.on("touchstart.scrollindicator",function(e){return n=window.setTimeout(function(){t(e.currentTarget).addClass("show-title"),n=null},m.touchTitleDelay)}),e.on("touchend.scrollindicator",function(e){return n&&(window.clearTimeout(n),p(t(e.currentTarget).find("a:first").data("targetSection"))),t(".show-title").removeClass("show-title")})},c=function(e,n,i){return e.on("mouseover.scrollindicator mouseout.scrollindicator",function(){return e.toggleClass("show-title"),i.toggleClass("open")}),n.on("click.scrollindicator",function(e){return e.preventDefault(),p(t(e.currentTarget).data("targetSection"))})},u=function(){var e,n;return n=t("<div>").attr("id","scroll-indicator-bullets"),e=t("<ul>").appendTo(n),r.each(function(n,i){var o,a,u,s,f;return s=t(i),n>0&&(u=t(r.get(n-1)),u.data("nextTargetSection",s),s.data("prevTargetSection",u)),a=t("<a>").attr("href","#"+s.attr("id")),a.addClass("bullet-item-link"),a.data("targetSection",s),s.data("bulletItemLink",a),f=s.find(m.titleSelector).filter(l).first().text(),""!==f&&a.append(t("<span>").addClass("bullet-nav-title").text(f)),a.append(t("<i>").addClass("circle")),o=t("<li>"),null!=window.Modernizr&&window.Modernizr.touch?d(o):c(o,a,e),a.appendTo(o),o.appendTo(e)}),t("body").append(n),r.first().data("bulletItemLink").addClass("active")},o=function(e){if(t(".bullet-item-link.active").removeClass("active"),e.data("bulletItemLink"))return e.data("bulletItemLink").addClass("active")},f=function(){return r.each(function(e,i){return new window.Waypoint({element:i,handler:function(e){if("down"===e)return t(".bullet-item-link.active").removeClass("active"),n=t(this.element),o(t(this.element))},offset:m.waypointOffsetDown})}),r.slice(1).each(function(e,i){return new window.Waypoint({element:i,handler:function(e){if("up"===e)return t(".bullet-item-link.active").removeClass("active"),n=t(this.element),o(t(this.element))},offset:m.waypointOffsetUp})}),new window.Waypoint({element:r.get(0),handler:function(e){if("up"===e)return t(".bullet-item-link.active").removeClass("active"),n=t(this.element),o(t(this.element))},offset:-5})},s=function(){return t(window.document).keydown(function(t){var e;return e=t.keyCode?t.keyCode:t.which,33===e&&h()?t.preventDefault():34===e&&w()?t.preventDefault():void 0})},w=function(){return!(!n||!n.data("nextTargetSection"))&&(p(n.data("nextTargetSection")),!0)},h=function(){return!(!n||!n.data("prevTargetSection"))&&(p(n.data("prevTargetSection")),!0)},u(),f(),m.pgKeysEnabled&&s(),{scrollToNext:w,scrollToPrev:h}}})}).call(this);